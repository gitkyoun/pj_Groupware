<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="message">
	<select id="msgList" resultType="com.sp.message.Message">
		SELECT msgNum, content, sendTime, readTime, msgKeep, sendMember, toMember, s.name sendMemberName, t.name toMemberName
		FROM message m INNER JOIN member s ON m.sendMember = s.memberNum INNER JOIN member t ON m.toMember = t.memberNum 
	</select>
	
	<insert id="msgInsert" parameterType="com.sp.message.Message">
		INSERT INTO message(msgNum, content, sendMember, toMember)
		VALUES(msg_seq.nextval, #{content}, #{sendMember}, #{toMember, jdbcType=VARCHAR})
	</insert>
</mapper>