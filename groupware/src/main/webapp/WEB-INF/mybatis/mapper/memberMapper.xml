<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="member">

<!-- 회원 정보 가져오기 -->
    <select id="readMember" resultType="com.sp.member.Member" parameterType="String">
        SELECT memberNum, name, pwd FROM member
            WHERE memberNum = #{memberNum}
    </select>

<!--  2개 table 모두 한번에  회원 추가 update -->
	<update id="insertMember" parameterType="com.sp.member.Member">
		INSERT ALL
			INTO member(memberNum,name,pwd,positionNum,departmentNum) 
				 VALUES(#{memberNum},#{name},#{pwd},#{positionNum},#{departmentNum})
			INTO memberauthority(memberNum,Authority) VALUES(#{memberNum},'ROLE_USER') 
			INTO memberdetailinfo(memberNum,birth,email,tel,phone,zip,addr1,addr2)
				 VALUES(#{memberNum},#{birth},#{email},#{tel},#{phone},
				 #{zip,jdbcType=VARCHAR},#{addr1,jdbcType=VARCHAR},#{addr2,jdbcType=VARCHAR})
			SELECT * FROM dual
	</update>
</mapper>